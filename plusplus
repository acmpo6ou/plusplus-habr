plusplus – операторы унарного инкремента/декремента в python

plusplus – это маленькая библиотека которая добавляет операторы унарного инкремента и декремента в python. Ниже привожу перевод README plusplus в котором объясняется как библиотека работает. Приятного чтения!

Предисловие

По умолчанию python не поддерживает ни пре-инкременты (++x) ни пост-инкременты (x++). Тем не мение, в python конструкция ++x синтаксически корректна так как он парсит ее как две последующие операции +x где + это унарный плюс (тоже самое с --x и унарным минусом). Обе эти операции не имеют никакого эффекта так как -(-x) == +(+x) == x.

plusplus патчит python байткод превращая выражения ++x в x += 1. Также поддерживаются инкременты и декременты элементов коллекций и атрибутов объектов, например:

some_dict = {'key': 42}
++some_dict['key']
assert some_dict['key'] == 43

В отличии от x += 1, ++x это выражение, так что оно прекрасно работает внутри других выражений, в условиях if/while, в лямбдах и в list/dict comprehensions:

array[++index] = new_value

if --connection.num_users == 0:
    connection.close()

# Выражение `global counter` не нужно благодаря инкременту
button.add_click_callback(lambda: ++counter)

index = 0
indexed_cells = {++index: cell for row in table for cell in row}

Здесь можете посмотреть более сложные примеры.

Причина создания библиотеки

Я бы не сказал что использовать инкременты в реальных проэктах хорошая идея
